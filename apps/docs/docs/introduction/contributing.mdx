# Contributing Guidelines

Welcome to the Drawink development team! This guide covers our development workflow, coding standards, and contribution process.

## Development Workflow

### 1. Set Up Your Environment

```bash
# Clone the repository
git clone <repository-url>
cd drawink

# Install dependencies
bun install

# Start development servers
bun run dev
```

### 2. Create a Feature Branch

Always create a new branch for your work:

```bash
git checkout -b feature/your-feature-name
# or
git checkout -b fix/bug-description
```

**Branch Naming Conventions:**
- `feature/` - New features
- `fix/` - Bug fixes
- `refactor/` - Code refactoring
- `docs/` - Documentation updates
- `chore/` - Maintenance tasks

### 3. Make Your Changes

- Write clean, maintainable code
- Follow the existing code style (enforced by Biome)
- Add tests for new features or bug fixes
- Update documentation as needed

### 4. Run Quality Checks

Before committing, ensure all checks pass:

```bash
# Lint your code
bun run lint

# Type check
bun run typecheck

# Run tests
bun run test

# Run all checks
bun run lint && bun run typecheck && bun run test
```

### 5. Commit Your Changes

Use semantic commit messages:

```bash
git add .
git commit -m "feat: add new drawing tool"
```

**Commit Message Format:**

```
<type>: <description>

[optional body]
[optional footer]
```

**Types:**
- `feat` - New feature
- `fix` - Bug fix
- `docs` - Documentation changes
- `style` - Code style changes (formatting, missing semi-colons, etc.)
- `refactor` - Code refactoring
- `perf` - Performance improvements
- `test` - Adding or updating tests
- `build` - Build system changes
- `ci` - CI/CD changes
- `chore` - Other changes (dependencies, tooling, etc.)

**Examples:**
```bash
git commit -m "feat: add text-to-diagram AI feature"
git commit -m "fix: resolve WebSocket connection timeout issue"
git commit -m "docs: update API integration guide"
```

### 6. Push and Create Pull Request

```bash
git push origin feature/your-feature-name
```

Then create a Pull Request through your Git interface.

## Code Standards

### TypeScript

- Use TypeScript for all new code
- Maintain strict type checking
- Avoid `any` types - use `unknown` or proper typing
- Document complex type definitions

### React Components

- Use functional components with hooks
- Keep components focused and single-purpose
- Extract reusable logic into custom hooks
- Use Jotai for global state management

### Styling

- Use Tailwind CSS for styling
- Follow the existing design system
- Use Radix UI for accessible components
- Avoid inline styles except for dynamic values

### File Organization

```
app-or-package/
├── src/
│   ├── components/     # React components
│   ├── hooks/          # Custom hooks
│   ├── lib/            # Utilities and helpers
│   ├── stores/         # Jotai atoms
│   ├── types/          # TypeScript types
│   └── index.ts        # Entry point
```

## Testing Guidelines

### When to Write Tests

- **Required:**
  - New features
  - Bug fixes
  - Core logic changes
  - Public APIs

- **Optional:**
  - UI components (focus on integration tests)
  - Simple utility functions

### Test Structure

```typescript
import { describe, it, expect } from 'vitest';

describe('FeatureName', () => {
  it('should do something specific', () => {
    // Arrange
    const input = setupTestData();

    // Act
    const result = performAction(input);

    // Assert
    expect(result).toBe(expectedOutput);
  });
});
```

## Monorepo Guidelines

### Package Dependencies

**Strict Rules:**
- `apps/*` can depend on `packages/*`
- `packages/*` NEVER depend on `apps/*`
- Avoid circular dependencies between packages

### Adding Dependencies

```bash
# Add to specific package
cd packages/common
bun add <package-name>

# Add to specific app
cd apps/web
bun add <package-name>

# Add to root (workspace-wide)
cd ../..
bun add -D <package-name>
```

### Turborepo Caching

Turborepo caches build outputs. Clear cache if you encounter issues:

```bash
rm -rf .turbo
bun run clean
bun install
```

## Code Review Process

1. **Self-Review** - Review your own PR before requesting review
2. **Automated Checks** - Ensure lint, typecheck, and tests pass
3. **Peer Review** - Request review from team members
4. **Address Feedback** - Make requested changes
5. **Merge** - Once approved, merge to main branch

## Getting Help

- Check existing documentation
- Review similar code in the codebase
- Ask team members for guidance
- Update docs if you find gaps

## Best Practices

- **Keep PRs focused** - One feature or fix per PR
- **Write descriptive commit messages** - Future you will thank you
- **Test thoroughly** - Both automated and manual testing
- **Update docs** - Keep documentation in sync with code
- **Be responsive** - Respond to review comments promptly
